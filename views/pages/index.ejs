<html>
<head>
    <meta charset="UTF-8">
    <title>title</title>
</head>
<body>
<h3>Todo List</h3>
<ul>
    <% todos.forEach(function(todo) { %>
    <li><%= todo.description %>
    <form onsubmit="f1(event)">
        <input id="<%=todo._id%>" type="submit" value="Delete">
    </form>
    </li>
    <% }); %>
</ul>

<h3>Add a todo</h3>
<form onsubmit="f(event)">
    Description:<br>
    <input type="text" name="description" id="description">
    <input type="submit" value="Submit">
</form>
<script>
    function f(e) {
        e.preventDefault()
        fetch("/todo",
            {
                method: "POST",
                body: JSON.stringify({description: e.currentTarget["0"].value}),
                headers: {"content-type": "application/json"},
                credentials: "include"
            }).then(() => {location.reload()})
    }
    function f1(e) {
        e.preventDefault()
        fetch("/todo",
            {
                method: "DELETE",
                body: JSON.stringify({id: e.currentTarget["0"].id}),
                headers: {"content-type": "application/json"},
                credentials: "include"
            }).then(() => {location.reload()})
    }
</script>
</body>
</html>